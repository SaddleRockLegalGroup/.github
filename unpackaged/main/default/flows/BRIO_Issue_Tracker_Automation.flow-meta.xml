<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <actionCalls>
        <name>Alert_Power_User</name>
        <label>Alert Power User</label>
        <locationX>50</locationX>
        <locationY>539</locationY>
        <actionName>emailSimple</actionName>
        <actionType>emailSimple</actionType>
        <connector>
            <targetReference>Post_to_Chatter</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>emailAddresses</name>
            <value>
                <elementReference>$Record.litify_imp__Power_User__r.Email</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>senderAddress</name>
            <value>
                <elementReference>$User.Email</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>emailSubject</name>
            <value>
                <elementReference>alertPowerUserSubject</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>emailBody</name>
            <value>
                <elementReference>fxAlertPowerUserEmailBody</elementReference>
            </value>
        </inputParameters>
        <nameSegment>emailSimple</nameSegment>
    </actionCalls>
    <actionCalls>
        <name>Email_Litify</name>
        <label>Email Litify</label>
        <locationX>842</locationX>
        <locationY>431</locationY>
        <actionName>emailSimple</actionName>
        <actionType>emailSimple</actionType>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>emailAddresses</name>
            <value>
                <elementReference>$Record.litify_imp__Power_User__r.Email</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>senderAddress</name>
            <value>
                <elementReference>$User.Email</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>emailSubject</name>
            <value>
                <elementReference>alertPMSubject</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>emailBody</name>
            <value>
                <elementReference>alertPMEmailBody</elementReference>
            </value>
        </inputParameters>
        <nameSegment>emailSimple</nameSegment>
    </actionCalls>
    <actionCalls>
        <name>Email_Submitter</name>
        <label>Email Submitter</label>
        <locationX>578</locationX>
        <locationY>539</locationY>
        <actionName>emailSimple</actionName>
        <actionType>emailSimple</actionType>
        <connector>
            <targetReference>Post_Submitter_Alert_to_Chatter</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>emailAddresses</name>
            <value>
                <elementReference>$Record.litify_imp__Submitter__r.Email</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>senderAddress</name>
            <value>
                <elementReference>$User.Email</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>emailSubject</name>
            <value>
                <elementReference>alerSubmitterSubject</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>emailBody</name>
            <value>
                <elementReference>alertSubmitterEmailBody</elementReference>
            </value>
        </inputParameters>
        <nameSegment>emailSimple</nameSegment>
    </actionCalls>
    <actionCalls>
        <name>Post_Submitter_Alert_to_Chatter</name>
        <label>Post Submitter Alert to Chatter</label>
        <locationX>578</locationX>
        <locationY>647</locationY>
        <actionName>chatterPost</actionName>
        <actionType>chatterPost</actionType>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>text</name>
            <value>
                <elementReference>alertSubmitterChatterPost</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>subjectNameOrId</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputParameters>
        <nameSegment>chatterPost</nameSegment>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </actionCalls>
    <actionCalls>
        <name>Post_to_Chatter</name>
        <label>Post to Chatter</label>
        <locationX>50</locationX>
        <locationY>647</locationY>
        <actionName>chatterPost</actionName>
        <actionType>chatterPost</actionType>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>text</name>
            <value>
                <elementReference>alerPowerUserChatterPost</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>subjectNameOrId</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputParameters>
        <nameSegment>chatterPost</nameSegment>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </actionCalls>
    <apiVersion>58.0</apiVersion>
    <areMetricsLoggedToDataCloud>false</areMetricsLoggedToDataCloud>
    <decisions>
        <name>Which_update</name>
        <label>Which update?</label>
        <locationX>578</locationX>
        <locationY>323</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Is_New</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record__Prior.Id</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_Owner</targetReference>
            </connector>
            <label>Is New</label>
        </rules>
        <rules>
            <name>Resolved</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.litify_imp__Status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Resolved</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Update_Date_Resolved</targetReference>
            </connector>
            <label>Resolved</label>
        </rules>
        <rules>
            <name>Ready_for_Testing</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.litify_imp__Status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Ready for Testing</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_Owner_to_Submitter</targetReference>
            </connector>
            <label>Ready for Testing</label>
        </rules>
        <rules>
            <name>Failed_Testing</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.litify_imp__Status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Failed Testing</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Email_Litify</targetReference>
            </connector>
            <label>Failed Testing</label>
        </rules>
    </decisions>
    <environments>Default</environments>
    <formulas>
        <name>fxAlertPowerUserEmailBody</name>
        <dataType>String</dataType>
        <expression>&#39;Hello&#39; &amp; {!$Record.litify_imp__Power_User__r.FirstName} &amp; &#39; &#39; &amp; {!$Record.litify_imp__Power_User__r.LastName} &amp; &#39;,&#39; &amp; BR() &amp;
&#39;Please review the following issue from&#39; &amp; {!$Record.litify_imp__Submitter__r.FirstName} &amp; &#39; &#39; &amp; {!$Record.litify_imp__Submitter__r.LastName} &amp; &#39;.&#39; &amp; BR() &amp; BR() &amp; {!$Record.litify_imp__Description__c} &amp; BR() &amp; BR() &amp;
&#39;Click here to open the issue:&#39; &amp; {!fxRecordLink} &amp; BR() &amp; BR() &amp;
&#39;If you determine it is a unique issue and needs to be addressed, please reassign the owner to BRIO Services and change the status to Ready for Litify.&#39; &amp; BR() &amp;
&#39;Thanks!&#39; &amp; BR() &amp;
&#39;Your Litify Project Team&#39;</expression>
    </formulas>
    <formulas>
        <name>fxRecordLink</name>
        <dataType>String</dataType>
        <expression>LEFT({!$Api.Partner_Server_URL_60}, FIND(&#39;/services&#39;, {!$Api.Partner_Server_URL_60})) &amp; {!$Record.Id}</expression>
    </formulas>
    <interviewLabel>BRIO - Issue Tracker Automation {!$Flow.CurrentDateTime}</interviewLabel>
    <label>BRIO - Issue Tracker Automation</label>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>AUTO_LAYOUT_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>AutoLaunchedFlow</processType>
    <recordUpdates>
        <name>Set_Owner</name>
        <label>Set Owner</label>
        <locationX>50</locationX>
        <locationY>431</locationY>
        <connector>
            <targetReference>Alert_Power_User</targetReference>
        </connector>
        <inputAssignments>
            <field>OwnerId</field>
            <value>
                <elementReference>$Record.litify_imp__Power_User__c</elementReference>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Set_Owner_to_Submitter</name>
        <label>Set Owner to Submitter</label>
        <locationX>578</locationX>
        <locationY>431</locationY>
        <connector>
            <targetReference>Email_Submitter</targetReference>
        </connector>
        <inputAssignments>
            <field>OwnerId</field>
            <value>
                <elementReference>$Record.litify_imp__Submitter__c</elementReference>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Date_Resolved</name>
        <label>Update Date Resolved</label>
        <locationX>314</locationX>
        <locationY>431</locationY>
        <inputAssignments>
            <field>litify_imp__Date_Resolved__c</field>
            <value>
                <elementReference>$Flow.CurrentDateTime</elementReference>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <start>
        <locationX>452</locationX>
        <locationY>0</locationY>
        <connector>
            <targetReference>Which_update</targetReference>
        </connector>
        <object>litify_imp__Litify_Issue__c</object>
        <recordTriggerType>CreateAndUpdate</recordTriggerType>
        <triggerType>RecordAfterSave</triggerType>
    </start>
    <status>Draft</status>
    <textTemplates>
        <name>alerPowerUserChatterPost</name>
        <isViewedAsPlainText>false</isViewedAsPlainText>
        <text>&lt;p&gt;@{!$Record.litify_imp__Power_User__c} A new issue was submitted.&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;{!$Record.litify_imp__Description__c}&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Please review to determine if this is a valid issue. If valid, mark the status as Ready for LItify otherwise mark the status as duplicate or resolved.&lt;/p&gt;</text>
    </textTemplates>
    <textTemplates>
        <name>alerSubmitterSubject</name>
        <isViewedAsPlainText>false</isViewedAsPlainText>
        <text>&lt;p&gt;Your Issue {!$Record.Name} has been fixed and is ready to be tested.&lt;/p&gt;</text>
    </textTemplates>
    <textTemplates>
        <name>alertPMEmailBody</name>
        <isViewedAsPlainText>false</isViewedAsPlainText>
        <text>&lt;p&gt;Hello PM!&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;The following issue has failed testing. Please investigate.&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;{!$Record.litify_imp__Description__c}&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;a href=&quot;{!fxRecordLink}&quot; rel=&quot;noopener noreferrer&quot; target=&quot;_blank&quot;&gt;{!$Record.Name}&lt;/a&gt;&lt;/p&gt;</text>
    </textTemplates>
    <textTemplates>
        <name>alertPMSubject</name>
        <isViewedAsPlainText>false</isViewedAsPlainText>
        <text>&lt;p&gt;Issue has failed testing&lt;/p&gt;</text>
    </textTemplates>
    <textTemplates>
        <name>alertPowerUserEmailBody</name>
        <isViewedAsPlainText>true</isViewedAsPlainText>
        <text>Hello {!$Record.litify_imp__Power_User__r.FirstName} {!$Record.litify_imp__Power_User__r.LastName}

Please review the following issue from {!$Record.litify_imp__Submitter__r.FirstName} {!$Record.litify_imp__Submitter__r.LastName}

{!$Record.litify_imp__Description__c}

Click here to open the issue. {!fxRecordLink}

If you determine it is a unique issue and needs to be addressed, please reassign the owner to &quot;BRIO Services&quot; and change the status to &quot;Ready for Litify&quot;

Thanks!
Your Litify Project Team</text>
    </textTemplates>
    <textTemplates>
        <name>alertPowerUserSubject</name>
        <isViewedAsPlainText>false</isViewedAsPlainText>
        <text>&lt;p&gt;Please review new issue from {!$Record.litify_imp__Submitter__r.FirstName} {!$Record.litify_imp__Submitter__r.LastName}&lt;/p&gt;</text>
    </textTemplates>
    <textTemplates>
        <name>alertSubmitterChatterPost</name>
        <isViewedAsPlainText>false</isViewedAsPlainText>
        <text>&lt;p&gt;@{!$Record.litify_imp__Submitter__c} This issue has been resolved.&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;{!$Record.litify_imp__Description__c}&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Here are our comments:&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;{!$Record.litify_imp__Resolution_Comments__c}&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Please verify it is working as expected. Respond to this chatter if there are still issues and mark the status as failed testing or mark the issue status as resolved. Thank you.&lt;/p&gt;</text>
    </textTemplates>
    <textTemplates>
        <name>alertSubmitterEmailBody</name>
        <isViewedAsPlainText>false</isViewedAsPlainText>
        <text>&lt;p&gt;Hello {!$Record.litify_imp__Submitter__r.FirstName} {!$Record.litify_imp__Submitter__r.LastName}&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Your Issue &lt;a href=&quot;{!fxRecordLink}&quot; rel=&quot;noopener noreferrer&quot; target=&quot;_blank&quot;&gt;{!$Record.Name}&lt;/a&gt; has been resolved by Litify.&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;{!$Record.litify_imp__Description__c}&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Here are our comments:&lt;/p&gt;&lt;p&gt;{!$Record.litify_imp__Resolution_Comments__c}&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Please test the issue to validate this fix.&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Once you have verified it is working as expected, please change the issue status to &quot;Resolved.&quot;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;If the issue remains unresolved, please mark the status as &quot;Failed Testing&quot; and describe the issue you are still seeing.&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;If you have any questions, please let your power user know.&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Thanks!&lt;/p&gt;&lt;p&gt;Your Litify Project Team&lt;/p&gt;</text>
    </textTemplates>
</Flow>
