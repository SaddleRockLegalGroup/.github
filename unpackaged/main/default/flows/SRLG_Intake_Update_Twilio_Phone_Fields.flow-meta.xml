<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <apiVersion>61.0</apiVersion>
    <areMetricsLoggedToDataCloud>false</areMetricsLoggedToDataCloud>
    <description>6-20-2025 LP- Updated condition to anytime the phone mobile number is changed on the Intake it will use that to update the mobile Twilio phone number, if there is no mobile number then Twilio will be blank, also fixed hubspot condition.

Used to update Twilio mobile phone field while we correct the system as caller information doesn&#39;t match client information.

Brendon V4 Update: Only Trigger if not created by Hubspot</description>
    <environments>Default</environments>
    <formulas>
        <name>NewTwilioPhoneNumber</name>
        <dataType>String</dataType>
        <expression>IF(NOT(ISBLANK({!$Record.FX_Client_Phone_Mobile__c} )), {!$Record.FX_Client_Phone_Mobile__c}, &quot;&quot;)</expression>
    </formulas>
    <interviewLabel>SRLG | Intake | Update Twilio Phone Fields {!$Flow.CurrentDateTime}</interviewLabel>
    <label>SRLG | Intake | Update Twilio Phone Fields</label>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>AUTO_LAYOUT_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>AutoLaunchedFlow</processType>
    <recordUpdates>
        <name>Update_Intake</name>
        <label>Update Intake</label>
        <locationX>176</locationX>
        <locationY>323</locationY>
        <inputAssignments>
            <field>Mobile_twilio__c</field>
            <value>
                <elementReference>NewTwilioPhoneNumber</elementReference>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <start>
        <locationX>50</locationX>
        <locationY>0</locationY>
        <connector>
            <targetReference>Update_Intake</targetReference>
        </connector>
        <filterLogic>(1 OR 2 OR 3)</filterLogic>
        <filters>
            <field>FX_Client_Phone_Mobile__c</field>
            <operator>IsChanged</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <filters>
            <field>litify_pm__Phone__c</field>
            <operator>IsNull</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </filters>
        <filters>
            <field>litify_pm__Phone__c</field>
            <operator>IsChanged</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <object>litify_pm__Intake__c</object>
        <recordTriggerType>CreateAndUpdate</recordTriggerType>
        <triggerType>RecordAfterSave</triggerType>
    </start>
    <status>Active</status>
</Flow>
