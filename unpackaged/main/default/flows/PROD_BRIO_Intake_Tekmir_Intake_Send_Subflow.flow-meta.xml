<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <actionCalls>
        <name>Get_Shared_Links_From_Docrio</name>
        <label>Get Shared Links From Docrio</label>
        <locationX>374</locationX>
        <locationY>600</locationY>
        <actionName>SaddlerockGetDocrioDownloadUrlInvocable</actionName>
        <actionType>apex</actionType>
        <connector>
            <targetReference>LOG_Debug_Flow_Starting</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>fileInfoIds</name>
            <value>
                <elementReference>docrioFileInfoIds</elementReference>
            </value>
        </inputParameters>
        <nameSegment>SaddlerockGetDocrioDownloadUrlInvocable</nameSegment>
        <offset>0</offset>
        <outputParameters>
            <assignToReference>docrioSharedLinksOutput</assignToReference>
            <name>data</name>
        </outputParameters>
        <outputParameters>
            <assignToReference>var_DocrioSharedURLMessage</assignToReference>
            <name>message</name>
        </outputParameters>
        <outputParameters>
            <assignToReference>var_DocrioSharedURLSuccess</assignToReference>
            <name>success</name>
        </outputParameters>
    </actionCalls>
    <actionCalls>
        <name>PRODUCTION_Send_Tekmir_The_New_Matter_IA</name>
        <label>PRODUCTION - Send Tekmir The New Matter IA</label>
        <locationX>374</locationX>
        <locationY>924</locationY>
        <actionName>PRODSendTekmirTheMatterES.PRODUCTION - Send Tekmir The New Matter Action</actionName>
        <actionType>externalService</actionType>
        <connector>
            <targetReference>Tekmir_Success_Matter_Id</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>body</name>
            <value>
                <elementReference>sendNewMatterToTekmirJSONBody</elementReference>
            </value>
        </inputParameters>
        <nameSegment>PRODSendTekmirTheMatterES.PRODUCTION - Send Tekmir The New Matter Action</nameSegment>
        <offset>0</offset>
        <outputParameters>
            <assignToReference>sendNewMatterTekmir2XXResponse</assignToReference>
            <name>2XX</name>
        </outputParameters>
        <outputParameters>
            <assignToReference>var_NewMatterResponseCode</assignToReference>
            <name>responseCode</name>
        </outputParameters>
        <outputParameters>
            <assignToReference>var_NewMatterDefaultException</assignToReference>
            <name>defaultExc</name>
        </outputParameters>
    </actionCalls>
    <actionCalls>
        <name>Send_Tekmir_Documents_Related_To_The_Intake</name>
        <label>Send Tekmir Documents Related To The Intake</label>
        <locationX>374</locationX>
        <locationY>1548</locationY>
        <actionName>PRODTemkirDocrioDocuments.PROD Send Tekmir Intake Documents</actionName>
        <actionType>externalService</actionType>
        <connector>
            <targetReference>New_Matter_Response_2XX</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>body</name>
            <value>
                <elementReference>completeTekmirDocumentSendJSON</elementReference>
            </value>
        </inputParameters>
        <nameSegment>PRODTemkirDocrioDocuments.PROD Send Tekmir Intake Documents</nameSegment>
        <offset>0</offset>
        <outputParameters>
            <assignToReference>tekmirDocumentSend200Response</assignToReference>
            <name>2XX</name>
        </outputParameters>
        <outputParameters>
            <assignToReference>var_DocumentResponseCode</assignToReference>
            <name>responseCode</name>
        </outputParameters>
        <outputParameters>
            <assignToReference>var_DocumentDefaultException</assignToReference>
            <name>defaultExc</name>
        </outputParameters>
    </actionCalls>
    <apiVersion>61.0</apiVersion>
    <areMetricsLoggedToDataCloud>false</areMetricsLoggedToDataCloud>
    <assignments>
        <description>We will pass file ids here to then be looked up in docrio to return the file!</description>
        <name>Add_File_Info_Id_To_File_Info_Id_Record_Collection</name>
        <label>Add File Info Id To File Info Id Record Collection</label>
        <locationX>374</locationX>
        <locationY>492</locationY>
        <assignmentItems>
            <assignToReference>docrioFileInfoIds</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>Get_Docrio_File_Info_Records.Id</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Get_Shared_Links_From_Docrio</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Create_Document_JSON_Body_For_Send</name>
        <label>Create Document JSON Body For Send</label>
        <locationX>374</locationX>
        <locationY>1440</locationY>
        <assignmentItems>
            <assignToReference>completeTekmirDocumentSendJSON.relatedSrlgMatterId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>recordId</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>completeTekmirDocumentSendJSON.documents</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>multipleTekmirDocuments</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Send_Tekmir_Documents_Related_To_The_Intake</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Create_Single_Document_Record_For_Document_Array</name>
        <label>Create Single Document Record For Document Array</label>
        <locationX>462</locationX>
        <locationY>1248</locationY>
        <assignmentItems>
            <assignToReference>singleTekmirDocument.completedDateTime</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Flow.CurrentDateTime</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>singleTekmirDocument.contentType</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_Docrio_File_Info_Records.litify_docs__File_Type__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>singleTekmirDocument.expiration</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>expirationDate</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>singleTekmirDocument.id</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Docrio_Files_Loop.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>singleTekmirDocument.name</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_Docrio_File_Info_Records.Name</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>singleTekmirDocument.url</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Docrio_Files_Loop.SignedUrl</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>singleTekmirDocument.z0type</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>documentType</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>multipleTekmirDocuments</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>singleTekmirDocument</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Docrio_Files_Loop</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>NewMatter_JSON_Body_Construction</name>
        <label>NewMatter JSON Body Construction</label>
        <locationX>374</locationX>
        <locationY>816</locationY>
        <assignmentItems>
            <assignToReference>sendNewMatterToTekmirJSONBody.campaign</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>getIntake.Campaign__r.Name</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sendNewMatterToTekmirJSONBody.clientCallingOnBehalfOf</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>getIntake.Calling_on_behalf_of_you_or_loved_one__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sendNewMatterToTekmirJSONBody.clientCity</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>getIntake.litify_pm__Client__r.BillingCity</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sendNewMatterToTekmirJSONBody.clientDateOfBirth</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>getIntake.litify_pm__Client__r.litify_pm__Date_of_birth__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sendNewMatterToTekmirJSONBody.clientFirstName</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>getIntake.litify_pm__Client__r.litify_pm__First_Name__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sendNewMatterToTekmirJSONBody.clientLastName</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>getIntake.litify_pm__Client__r.litify_pm__Last_Name__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sendNewMatterToTekmirJSONBody.clientMobilePhone</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>getIntake.litify_pm__Client__r.litify_pm__Phone_Mobile__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sendNewMatterToTekmirJSONBody.clientPrimaryEmail</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>getIntake.litify_pm__Client__r.litify_pm__Email__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sendNewMatterToTekmirJSONBody.clientState</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>getIntake.litify_pm__Client__r.BillingState</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sendNewMatterToTekmirJSONBody.clientStreet</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>getIntake.litify_pm__Client__r.BillingStreet</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sendNewMatterToTekmirJSONBody.clientZip</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>getIntake.litify_pm__Client__r.BillingPostalCode</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sendNewMatterToTekmirJSONBody.clientsFamilyRelationshipToInjuredParty</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>getIntake.FX_Self_Or_Relation_to_Invdiv__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sendNewMatterToTekmirJSONBody.discoveryOfCauseDate</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>getIntake.Campaign_Case__r.Discovery_Date__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sendNewMatterToTekmirJSONBody.howClientFirstLearnedOfCause</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>getIntake.Campaign_Case__r.How_First_Learned_Of_Cause__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sendNewMatterToTekmirJSONBody.injuredPartyHasHistoryOfHepatitis</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>getIntake.Campaign_Case__r.Pre_Existing_Condition__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sendNewMatterToTekmirJSONBody.intakeVendor</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>getIntake.Intake_Vendor__r.Name</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sendNewMatterToTekmirJSONBody.marketingChannel</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>getIntake.Marketing_Channel__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sendNewMatterToTekmirJSONBody.marketingMedium</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>getIntake.Marketing_Medium__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sendNewMatterToTekmirJSONBody.marketingSource</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>getIntake.Source_Name__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sendNewMatterToTekmirJSONBody.marketingTerm</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>getIntake.Marketing_Term__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sendNewMatterToTekmirJSONBody.marketingVendor</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>getIntake.litify_pm__Source__r.Name</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sendNewMatterToTekmirJSONBody.primaryExposureEndDate</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>getIntake.Campaign_Case__r.Date_of_Last_Exposure__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sendNewMatterToTekmirJSONBody.primaryExposureStartDate</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>getIntake.Campaign_Case__r.Date_of_First_Exposure__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sendNewMatterToTekmirJSONBody.primaryExposureState</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>getIntake.Campaign_Case__r.Country_States_of_Occurence__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sendNewMatterToTekmirJSONBody.primaryInjury</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>getIntake.Campaign_Case__r.Diagnosis_1__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sendNewMatterToTekmirJSONBody.primaryInjuryDateOfDiagnosis</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>getIntake.Campaign_Case__r.Date_of_Diagnosis__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sendNewMatterToTekmirJSONBody.primaryInjurySubType</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>getIntake.Campaign_Case__r.Related_Diagnosis_1__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sendNewMatterToTekmirJSONBody.retainedDate</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>getIntake.litify_pm__Retainer_Agreement_Signed__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sendNewMatterToTekmirJSONBody.retainerSentDate</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>getIntake.litify_pm__Retainer_Agreement_Sent_Date__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sendNewMatterToTekmirJSONBody.srlgMatterId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>recordId</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sendNewMatterToTekmirJSONBody.usedRoundupAtHomeOrWork</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>getIntake.Campaign_Case__r.Method_of_Application__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sendNewMatterToTekmirJSONBody.clientHasCopyOfDeathCertificate</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>getIntake.Hold_Death_Certificate__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sendNewMatterToTekmirJSONBody.clientHasLettersOfTestamentary</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>getIntake.Hold_Letters_of_Testamentary__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sendNewMatterToTekmirJSONBody.clientGender</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>getIntake.litify_pm__Client__r.litify_pm__Gender__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sendNewMatterToTekmirJSONBody.clientMiddleName</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>getIntake.litify_pm__Client__r.Middle_Name__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sendNewMatterToTekmirJSONBody.clientSuffix</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>getIntake.litify_pm__Client__r.Suffix__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sendNewMatterToTekmirJSONBody.injuredPartyFirstName</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>getIntake.Injured_Party_First_Name__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sendNewMatterToTekmirJSONBody.injuredPartyLastName</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>getIntake.Injured_Party_Last_Name__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sendNewMatterToTekmirJSONBody.injuredPartySuffix</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>getIntake.Injured_Party_Suffix__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sendNewMatterToTekmirJSONBody.injuredPartyDateOfBirth</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>getIntake.Injured_Party_Birthdate__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sendNewMatterToTekmirJSONBody.injuredPartyDateOfDeath</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>getIntake.Injured_Party_Date_of_Death__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sendNewMatterToTekmirJSONBody.injuredPartyGender</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>getIntake.InjuredPartyGender__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sendNewMatterToTekmirJSONBody.injuredPartyIsLiving</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>getIntake.Is_your_loved_one_still_living__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sendNewMatterToTekmirJSONBody.estateHasBeenOpened</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>getIntake.Client_Estate_Opened__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sendNewMatterToTekmirJSONBody.estateIsCurrentlyOpened</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>getIntake.Estate_Currently_Open__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sendNewMatterToTekmirJSONBody.clientIsExecutorOfEstate</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>executorYesNo</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sendNewMatterToTekmirJSONBody.primaryInjuryIsDiagnosed</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>formalDiagnosisYesNo</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sendNewMatterToTekmirJSONBody.injuredPartyStateOfDeath</assignToReference>
            <operator>Assign</operator>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sendNewMatterToTekmirJSONBody.injuredPartyPurchasedProduct</assignToReference>
            <operator>Assign</operator>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sendNewMatterToTekmirJSONBody.dateOfLastPurchase</assignToReference>
            <operator>Assign</operator>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sendNewMatterToTekmirJSONBody.injuredPartyHasHistoryOfSmoking</assignToReference>
            <operator>Assign</operator>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sendNewMatterToTekmirJSONBody.marketingTvStation</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>getIntake.MarketingTVStation__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sendNewMatterToTekmirJSONBody.primaryExposureYears</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>getIntake.Campaign_Case__r.Years_Used__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sendNewMatterToTekmirJSONBody.primaryExposureUsesPerYear</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>getIntake.Campaign_Case__r.Number_of_Times_Used__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sendNewMatterToTekmirJSONBody.primaryExposureHoursPerUses</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>getIntake.Campaign_Case__r.Hours_Used__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>PRODUCTION_Send_Tekmir_The_New_Matter_IA</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Tekmir_Success_Matter_Id</name>
        <label>Tekmir Success Matter Id</label>
        <locationX>374</locationX>
        <locationY>1032</locationY>
        <assignmentItems>
            <assignToReference>tekmirExternalId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>sendNewMatterTekmir2XXResponse.tekmirMatterId</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Docrio_Files_Loop</targetReference>
        </connector>
    </assignments>
    <constants>
        <name>const_flowName</name>
        <dataType>String</dataType>
        <value>
            <stringValue>PROD_BRIO_Intake_Tekmir_Intake_Send</stringValue>
        </value>
    </constants>
    <decisions>
        <name>New_Matter_Response_2XX</name>
        <label>New Matter Response = 2XX</label>
        <locationX>374</locationX>
        <locationY>1656</locationY>
        <defaultConnector>
            <targetReference>Update_Intake_With_Tekmir_Error</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No, Not 2XX</defaultConnectorLabel>
        <rules>
            <name>Yes_200</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>var_NewMatterResponseCode</leftValueReference>
                <operator>StartsWith</operator>
                <rightValue>
                    <stringValue>2</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Update_Intake_With_Tekmir_External_Id</targetReference>
            </connector>
            <label>Yes, 2XX</label>
        </rules>
    </decisions>
    <description>DEPRECATED</description>
    <environments>Default</environments>
    <formulas>
        <name>documentType</name>
        <dataType>String</dataType>
        <expression>IF(CONTAINS({!Get_Docrio_File_Info_Records.Name}, &quot;Retainer&quot;), &quot;Retainer&quot;,
IF(CONTAINS({!Get_Docrio_File_Info_Records.Name}, &quot;retainer&quot;), &quot;Retainer&quot;,
IF({!Get_Docrio_File_Info_Records.FX_Is_Signed_Retainer__c} = TRUE, &#39;Retainer&#39;,
IF(CONTAINS({!Get_Docrio_File_Info_Records.Name}, &quot;Intake&quot;), &quot;IntakePacket&quot;,
IF(CONTAINS({!Get_Docrio_File_Info_Records.Name}, &quot;intake&quot;), &quot;IntakePacket&quot;,
&quot;Unknown&quot;)))))</expression>
    </formulas>
    <formulas>
        <name>executorYesNo</name>
        <dataType>String</dataType>
        <expression>IF(ISPICKVAL({!getIntake.Confirm_if_caller_is_next_of_kin__c},&quot;The caller is the formal next of kin (when through all levels and they are the next in line)&quot;),&quot;Yes&quot;,&quot;No&quot;)</expression>
    </formulas>
    <formulas>
        <name>expirationDate</name>
        <dataType>DateTime</dataType>
        <expression>{!$Flow.CurrentDateTime} + (4.5/1440)</expression>
    </formulas>
    <formulas>
        <name>formalDiagnosisYesNo</name>
        <dataType>String</dataType>
        <expression>IF(ISPICKVAL({!getIntake.Campaign_Case__r.Diagnosis_1__c},&quot;Non-Hodgkins Lymphoma (NHL)&quot;), &quot;Yes&quot;, &quot;No&quot;)</expression>
    </formulas>
    <formulas>
        <name>fx_logDocrioIds</name>
        <dataType>String</dataType>
        <expression>&quot;Docrio File Ids: &quot; + {!docrioFileInfoIds}</expression>
    </formulas>
    <formulas>
        <name>fx_NewMatterRequestResponse</name>
        <dataType>String</dataType>
        <expression>&quot;Request: &quot; &amp; {!var_stringValueOfNewMatterInBody} &amp; 
BR() &amp; 
&quot;Response: &quot; &amp; {!var_stringValueOfNewMatterOutResponse}</expression>
    </formulas>
    <interviewLabel>PROD | BRIO | Intake | Tekmir Intake Send Subflow {!$Flow.CurrentDateTime}</interviewLabel>
    <label>DEP PROD | BRIO | Intake | Tekmir Intake Send Subflow</label>
    <loops>
        <name>Docrio_Files_Loop</name>
        <label>Docrio Files Loop</label>
        <locationX>374</locationX>
        <locationY>1140</locationY>
        <collectionReference>docrioSharedLinksOutput</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Create_Single_Document_Record_For_Document_Array</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Create_Document_JSON_Body_For_Send</targetReference>
        </noMoreValuesConnector>
    </loops>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>AUTO_LAYOUT_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>AutoLaunchedFlow</processType>
    <recordCreates>
        <name>LOG_All_Tekmir_Requests_Responses</name>
        <label>LOG: All Tekmir Requests / Responses</label>
        <locationX>374</locationX>
        <locationY>1956</locationY>
        <inputAssignments>
            <field>Flow_Name__c</field>
            <value>
                <elementReference>const_flowName</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Log_Type__c</field>
            <value>
                <stringValue>debug</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Message__c</field>
            <value>
                <elementReference>tt_allTekmirRequestResponse</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Record_Id__c</field>
            <value>
                <elementReference>recordId</elementReference>
            </value>
        </inputAssignments>
        <object>BRIO_Log_Platform_Event__e</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordCreates>
    <recordCreates>
        <name>LOG_Debug_Flow_Starting</name>
        <label>LOG: Debug - Flow Starting</label>
        <locationX>374</locationX>
        <locationY>708</locationY>
        <connector>
            <targetReference>NewMatter_JSON_Body_Construction</targetReference>
        </connector>
        <inputAssignments>
            <field>Flow_Name__c</field>
            <value>
                <elementReference>const_flowName</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Log_Type__c</field>
            <value>
                <stringValue>debug</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Message__c</field>
            <value>
                <stringValue>Flow Starting</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Record_Id__c</field>
            <value>
                <elementReference>recordId</elementReference>
            </value>
        </inputAssignments>
        <object>BRIO_Log_Platform_Event__e</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordCreates>
    <recordLookups>
        <description>This currently gets one record but we can always update it to get more!</description>
        <name>Get_Docrio_File_Info_Records</name>
        <label>Get Docrio File Info Records</label>
        <locationX>374</locationX>
        <locationY>384</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Add_File_Info_Id_To_File_Info_Id_Record_Collection</targetReference>
        </connector>
        <filterLogic>1 AND 2</filterLogic>
        <filters>
            <field>Intake__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>recordId</elementReference>
            </value>
        </filters>
        <filters>
            <field>FX_Is_Signed_Retainer__c</field>
            <operator>EqualTo</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>litify_docs__File_Info__c</object>
        <sortField>CreatedDate</sortField>
        <sortOrder>Desc</sortOrder>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>getIntake</name>
        <label>getIntake</label>
        <locationX>374</locationX>
        <locationY>276</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Get_Docrio_File_Info_Records</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>recordId</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>litify_pm__Intake__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordUpdates>
        <name>Update_Intake_With_Tekmir_Error</name>
        <label>Update Intake With Tekmir Error</label>
        <locationX>506</locationX>
        <locationY>1764</locationY>
        <connector>
            <targetReference>LOG_All_Tekmir_Requests_Responses</targetReference>
        </connector>
        <inputAssignments>
            <field>Referral_Partner_API_Description__c</field>
            <value>
                <stringValue>Tekmir on behalf of Duddy &amp; Czarnecki PLLC</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Referral_Partner_API_Error__c</field>
            <value>
                <elementReference>tt_newMatterError</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Referral_Partner_API_Last_Sent_DateTime__c</field>
            <value>
                <elementReference>$Flow.CurrentDateTime</elementReference>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Intake_With_Tekmir_External_Id</name>
        <label>Update Intake With Tekmir External Id</label>
        <locationX>242</locationX>
        <locationY>1764</locationY>
        <connector>
            <targetReference>LOG_All_Tekmir_Requests_Responses</targetReference>
        </connector>
        <inputAssignments>
            <field>Referral_Partner_API_Description__c</field>
            <value>
                <stringValue>Tekmir on behalf of Duddy &amp; Czarnecki PLLC</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Referral_Partner_API_Error__c</field>
        </inputAssignments>
        <inputAssignments>
            <field>Referral_Partner_API_External_ID__c</field>
            <value>
                <elementReference>tekmirExternalId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Referral_Partner_API_Last_Sent_DateTime__c</field>
            <value>
                <elementReference>$Flow.CurrentDateTime</elementReference>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <start>
        <locationX>50</locationX>
        <locationY>0</locationY>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Send_Tekmir_Test_API_Post__c</field>
            <operator>IsChanged</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <object>litify_pm__Intake__c</object>
        <recordTriggerType>Update</recordTriggerType>
        <scheduledPaths>
            <connector>
                <targetReference>getIntake</targetReference>
            </connector>
            <pathType>AsyncAfterCommit</pathType>
        </scheduledPaths>
        <triggerType>RecordAfterSave</triggerType>
    </start>
    <status>Draft</status>
    <textTemplates>
        <name>tekmirBodyForNote</name>
        <isViewedAsPlainText>true</isViewedAsPlainText>
        <text>{!sendNewMatterToTekmirJSONBody}</text>
    </textTemplates>
    <textTemplates>
        <name>tt_allTekmirRequestResponse</name>
        <isViewedAsPlainText>true</isViewedAsPlainText>
        <text>New Matter Request:
{!sendNewMatterToTekmirJSONBody} 

New Matter Response:
{!sendNewMatterTekmir2XXResponse}
{!var_NewMatterDefaultException}
{!var_NewMatterResponseCode}

Docrio Response:
{!docrioSharedLinksOutput}
{!var_DocrioSharedURLMessage}
{!var_DocrioSharedURLSuccess}

Document Request:
{!completeTekmirDocumentSendJSON}

Document Response:
{!tekmirDocumentSend200Response}
{!var_DocumentDefaultException}
{!var_DocumentResponseCode}</text>
    </textTemplates>
    <textTemplates>
        <name>tt_newMatterError</name>
        <isViewedAsPlainText>true</isViewedAsPlainText>
        <text>Response Code: 
{!var_NewMatterResponseCode}

Default Exception:
{!var_NewMatterDefaultException}</text>
    </textTemplates>
    <variables>
        <name>completeTekmirDocumentSendJSON</name>
        <apexClass>ExternalService__PRODTemkirDocrioDocuments_PRODx20Sendx20Tekmirx20Intakex20Documents_IN_body</apexClass>
        <dataType>Apex</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>docrioFileInfoIds</name>
        <dataType>String</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>docrioSharedLinksOutput</name>
        <apexClass>SaddlerockDocrioSignedUrlModel</apexClass>
        <dataType>Apex</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>multipleTekmirDocuments</name>
        <apexClass>ExternalService__PRODTemkirDocrioDocuments_PRODx20Sendx20Tekmirx20Intakex20Documents_IN_body_documents</apexClass>
        <dataType>Apex</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>recordId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>sendNewMatterTekmir2XXResponse</name>
        <apexClass>ExternalService__PRODSendTekmirTheMatterES_PRODUCTIONx20x2dx20Sendx20Tekmirx20Thex20Newx20Matterx20Action_OUT_2XX</apexClass>
        <dataType>Apex</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>sendNewMatterToTekmirJSONBody</name>
        <apexClass>ExternalService__PRODSendTekmirTheMatterES_PRODUCTIONx20x2dx20Sendx20Tekmirx20Thex20Newx20Matterx20Action_IN_body</apexClass>
        <dataType>Apex</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>singleTekmirDocument</name>
        <apexClass>ExternalService__PRODTemkirDocrioDocuments_PRODx20Sendx20Tekmirx20Intakex20Documents_IN_body_documents</apexClass>
        <dataType>Apex</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>tekmirDocumentSend200Response</name>
        <apexClass>ExternalService__PRODTemkirDocrioDocuments_PRODx20Sendx20Tekmirx20Intakex20Documents_OUT_2XX_documents</apexClass>
        <dataType>Apex</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <description>This is the tekmir success id for the intake we send them. There is what they call their &quot;matter Id&quot;</description>
        <name>tekmirExternalId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>var_DocrioSharedURLMessage</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>var_DocrioSharedURLSuccess</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>var_DocumentDefaultException</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>var_DocumentResponseCode</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>var_NewMatterDefaultException</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>var_NewMatterResponseCode</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>var_stringValueOfNewMatterInBody</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>var_stringValueOfNewMatterOutResponse</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
</Flow>
