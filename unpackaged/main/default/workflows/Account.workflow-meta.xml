<?xml version="1.0" encoding="UTF-8"?>
<Workflow xmlns="http://soap.sforce.com/2006/04/metadata">
    <fieldUpdates>
        <fullName>Set_Primary_Phone_Number</fullName>
        <description>Populate &quot;Phone&quot; field on Party record when &quot;Phone Mobile&quot;,  &quot;Phone Home&quot;, &quot;Phone Work&quot; or &quot;Phone Other&quot; have value(s). Party &quot;Phone&quot; field populates corresponding value on Intake records where that party is the Client.</description>
        <field>Phone</field>
        <formula>IF(NOT(ISBLANK( litify_pm__Phone_Mobile__c )), litify_pm__Phone_Mobile__c,
	IF(NOT(ISBLANK( litify_pm__Phone_Home__c )), litify_pm__Phone_Home__c,
		IF(NOT(ISBLANK( litify_pm__Phone_Work__c )), litify_pm__Phone_Work__c,
			IF(NOT(ISBLANK( litify_pm__Phone_Other__c )), litify_pm__Phone_Other__c, null
			)
		)
	)
)</formula>
        <name>Set Primary Phone Number</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Formula</operation>
        <protected>false</protected>
        <reevaluateOnChange>false</reevaluateOnChange>
    </fieldUpdates>
    <rules>
        <fullName>Update Phone</fullName>
        <actions>
            <name>Set_Primary_Phone_Number</name>
            <type>FieldUpdate</type>
        </actions>
        <active>true</active>
        <booleanFilter>1 OR 2 OR 3 OR 4</booleanFilter>
        <criteriaItems>
            <field>Account.litify_pm__Phone_Mobile__c</field>
            <operation>notEqual</operation>
        </criteriaItems>
        <criteriaItems>
            <field>Account.litify_pm__Phone_Home__c</field>
            <operation>notEqual</operation>
        </criteriaItems>
        <criteriaItems>
            <field>Account.litify_pm__Phone_Work__c</field>
            <operation>notEqual</operation>
        </criteriaItems>
        <criteriaItems>
            <field>Account.litify_pm__Phone_Other__c</field>
            <operation>notEqual</operation>
        </criteriaItems>
        <description>If mobile phone is not blank then mobile phone, else if home phone is not null then home phone, else if work phone is not null then work phone, else if other phone is not null then other phone, else null.</description>
        <triggerType>onAllChanges</triggerType>
    </rules>
</Workflow>
